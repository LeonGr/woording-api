<html>
	<head>
		<title>Wording</title>

		<!-- stylesheets -->
		<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/main.css') }}">

		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/ngDialog.min.css') }}">
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/ngDialog-theme-default.min.css') }}">

		<!-- scripts -->
		<script src="{{ url_for('static', filename='js/frameworks/angular.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/frameworks/ngDialog.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/frameworks/angular-cookies.min.js') }}"></script>
	</head>

	<body ng-app="myApp">

		<div ng-controller="MainController" id="main_controller">

			<header>

				<h1>Wording</h1>

				<div id="log_info">
					<div id="sign_or_log_in" ng-hide="loggedIn">
						<button id="sign_up" ng-click="openSignUp()">Sign up</button><!-- This comment is for removing the space between the sign up and login in button
						--><button id="log_in" ng-click="openLogIn()">Log In</button>
					</div>
					<div id="userinfo" ng-show="loggedIn">
						<button id="user_profile">Hello, [[ userData.username ]] </button><!--
						--><button id="log_out" ng-click="logoutUser()">Log Out</button>
					</div>
				</div>

			</header>

			<div id="content">

				<!-- load data -->
				{% if listname %}
					<div ng-init="loadUser('/{{username}}'); loadList('/{{username}}/{{listname}}')">
				{% else %}
					<div ng-init="loadUser('/{{username}}')">
				{% endif %}
						<div id="practice_div">

							<h1><b> [[listData.listname]] </b></h1>

							<h2 id="current_word"> [[ randomWord.language_1_text ]] </h2>
							<h2 id="wrong_word"></h2>

							<form ng-submit="submit()" id="word_input">
								<input type="text" ng-model="text" name="text" autocomplete="off" autocorrect="off">
								<button type="submit" id="submit">Next</button>
							</form>

							<p>Right <span id="correct">0</span></p>
							<br>
							<p>Wrong <span id="incorrect">0</span></p>
							<br>
							<p>Words left <span id="words_left"></span></p>

						</div> <!-- practice_div -->

						<div id="left_content">

							<h3>Friends</h3>

							<a href="" ng-click="loadUser('/cor')">
								<div class="user_list_item selected">
									Cor
								</div>
							</a>

							<a href="" ng-click="loadUser('/leon')">
								<div class="user_list_item">
									Leon
								</div>
							</a>

							<a href="" ng-click="loadUser('/philip')">
								<div class="user_list_item">
									Philip
								</div>
							</a>

						</div> <!-- left_content -->

						<div id="middle_content">

							<div id="list_header">
								<h3>Lists</h3>
							</div>

							<input ng-model="searchQuery" placeholder="Search">

							<table>
								<tr class="list_list-item" ng-repeat="list in userData.lists | filter:searchQuery" >
									<td ng-click="(loadList('/' + [[ userData.username ]] + '/' + [[ list.listname ]]))" onclick="showList()">
										[[ list.listname ]]
									</td>
								</tr>
								<tr>
									<td id="new_list" ng-click="createList()" onclick="showEditor()">
										New list
									</td>
								</tr>
							</table>


						</div> <!-- middle_content -->

						<div id="right_content">
							<div id="list_items" class="word_list">

								<div id="list_header">
									<h3>[[ listData.listname ]]</h3>
								</div>

								<table>
									<tr>
										<th ng-repeat="language in translations.eng.languages | filter:listData.language_1_tag"> [[ language.displayText ]] </th>
										<th ng-repeat="language in translations.eng.languages | filter:listData.language_2_tag"> [[ language.displayText ]] </th>
									</tr>
									<tr ng-repeat="word in listData.words">
										<td> [[ word.language_1_text ]] </td>
										<td> [[ word.language_2_text ]] </td>
									</tr>
								</table>

								<button id="practice_button" ng-click="startList()" onclick="showPractice()">
									Practice
								</button><!--

								--><button id="edit_button" ng-click="editList()" onclick="showEditor()">
									Edit
								</button><!--

								--><button id="delete_button" ng-click="deleteList(listData.listname)">
									Delete
								</button>

							</div> <!-- list_items -->

							<div id="edit_list" class="word_list">

								<div id="list_header">
									<h3><input type="text" placeholder="Listname" ng-model="editData.listname"></h3>
								</div>

								<table id="edit_list_table">
									<tr>
										<th>
											<select ng-model="editData.language_1_tag">
												<option value="">Select language 1</option>
												<option ng-repeat="language in languages" value="[[ language.id ]]">[[ language.name ]]</option>
											</select>
										</th>
										<th>
											<select ng-model="editData.language_2_tag">
												<option value="">Select language 2</option>
												<option ng-repeat="language in languages" value="[[ language.id ]]">[[ language.name ]]</option>
											</select>
										</th>
									</tr>
									<tr ng-repeat="word in editData.words">
										<td><input type="text" placeholder="Sentence" ng-model="word.language_1_text" name="edit_input"></td>
										<td><input type="text" placeholder="Translation" ng-model="word.language_2_text" name="edit_input"></td>
									</tr>
								</table>

								<button id="save_button" ng-click="saveList()">
									Save
								</button><!--
								--><button id="add_rows" onclick="addRow()">
									Add row
								</button><!--
								--><button id="delete_button" ng-click="deleteList(editData.listname)">
									Delete
								</button>

							</div> <!-- list_items -->

							<div id="results">
								<table ng-if="incorrectWords.length != 0">
									<h3> Results: </h3>
									Incorrect words:
									<tr>
										<th> Correct </th>
										<th> Typed </th>
									</tr>
									<tr ng-repeat="word in incorrectWords">
										<td> [[ word.correctWord ]] </td>
										<td> [[ word.incorrectWord ]] </td>
									</tr>
								</table>

								<div id="results_bar">
									<p id="correct_bar"></p><p id="incorrect_bar"></p>
								</div>
							</div>
						</div> <!-- right_content -->
					</div> <!-- ng-init -->

			</div> <!-- content -->

			<hr>

			<footer>
				Wording Inc. &copy; 2015 ¯\_(ツ)_/¯
			</footer>
		</div> <!-- MainController -->
	</body>

	<!-- Scripts -->
	<script src="{{ url_for('static', filename='js/script.js') }}"></script>

	<script src="{{ url_for('static', filename='js/app.js') }}"></script>
	<script src="{{ url_for('static', filename='js/controllers/MainController.js') }}"></script>
</html>
